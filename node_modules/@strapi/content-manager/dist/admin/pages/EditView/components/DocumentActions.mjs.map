{"version":3,"file":"DocumentActions.mjs","sources":["../../../../../admin/src/pages/EditView/components/DocumentActions.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {\n  useForm,\n  useNotification,\n  NotificationConfig,\n  useAPIErrorHandler,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Button,\n  Dialog,\n  Flex,\n  Modal,\n  Radio,\n  Typography,\n  VisuallyHidden,\n  Menu,\n  ButtonProps,\n} from '@strapi/design-system';\nimport { Cross, More, WarningCircle } from '@strapi/icons';\nimport mapValues from 'lodash/fp/mapValues';\nimport { useIntl } from 'react-intl';\nimport { useMatch, useNavigate, useParams } from 'react-router-dom';\nimport { DefaultTheme, styled } from 'styled-components';\n\nimport { PUBLISHED_AT_ATTRIBUTE_NAME } from '../../../constants/attributes';\nimport { SINGLE_TYPES } from '../../../constants/collections';\nimport { useDocumentContext } from '../../../features/DocumentContext';\nimport { useDocumentRBAC } from '../../../features/DocumentRBAC';\nimport { useDoc } from '../../../hooks/useDocument';\nimport { useDocumentActions } from '../../../hooks/useDocumentActions';\nimport { CLONE_PATH, LIST_PATH } from '../../../router';\nimport { useGetDraftRelationCountQuery } from '../../../services/documents';\nimport { isBaseQueryError, buildValidParams } from '../../../utils/api';\nimport { getTranslation } from '../../../utils/translations';\n\nimport type { RelationsFormValue } from './FormInputs/Relations/Relations';\nimport type { DocumentActionComponent } from '../../../content-manager';\n\n/* -------------------------------------------------------------------------------------------------\n * Types\n * -----------------------------------------------------------------------------------------------*/\ntype DocumentActionPosition = 'panel' | 'header' | 'table-row' | 'preview' | 'relation-modal';\n\ninterface DocumentActionDescription {\n  label: string;\n  onClick?: (event: React.SyntheticEvent) => Promise<boolean | void> | boolean | void;\n  icon?: React.ReactNode;\n  /**\n   * @default false\n   */\n  disabled?: boolean;\n  /**\n   * @default 'panel'\n   * @description Where the action should be rendered.\n   */\n  position?: DocumentActionPosition | DocumentActionPosition[];\n  dialog?: DialogOptions | NotificationOptions | ModalOptions;\n  /**\n   * @default 'secondary'\n   */\n  variant?: ButtonProps['variant'];\n  loading?: ButtonProps['loading'];\n}\n\ninterface DialogOptions {\n  type: 'dialog';\n  title: string;\n  content?: React.ReactNode;\n  variant?: ButtonProps['variant'];\n  onConfirm?: () => void | Promise<void>;\n  onCancel?: () => void | Promise<void>;\n}\n\ninterface NotificationOptions {\n  type: 'notification';\n  title: string;\n  link?: {\n    label: string;\n    url: string;\n    target?: string;\n  };\n  content?: string;\n  onClose?: () => void;\n  status?: NotificationConfig['type'];\n  timeout?: number;\n}\n\ninterface ModalOptions {\n  type: 'modal';\n  title: string;\n  content: React.ComponentType<{ onClose: () => void }> | React.ReactNode;\n  footer?: React.ComponentType<{ onClose: () => void }> | React.ReactNode;\n  onClose?: () => void;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActions\n * -----------------------------------------------------------------------------------------------*/\n\ninterface Action extends DocumentActionDescription {\n  id: string;\n}\n\ninterface DocumentActionsProps {\n  actions: Action[];\n}\n\nconst DocumentActions = ({ actions }: DocumentActionsProps) => {\n  const { formatMessage } = useIntl();\n  const [primaryAction, secondaryAction, ...restActions] = actions.filter((action) => {\n    if (action.position === undefined) {\n      return true;\n    }\n\n    const positions = Array.isArray(action.position) ? action.position : [action.position];\n    return positions.includes('panel');\n  });\n\n  if (!primaryAction) {\n    return null;\n  }\n\n  return (\n    <Flex direction=\"column\" gap={2} alignItems=\"stretch\" width=\"100%\">\n      <Flex gap={2}>\n        <DocumentActionButton {...primaryAction} variant={primaryAction.variant || 'default'} />\n        {restActions.length > 0 ? (\n          <DocumentActionsMenu\n            actions={restActions}\n            label={formatMessage({\n              id: 'content-manager.containers.edit.panels.default.more-actions',\n              defaultMessage: 'More document actions',\n            })}\n          />\n        ) : null}\n      </Flex>\n      {secondaryAction ? (\n        <DocumentActionButton\n          {...secondaryAction}\n          variant={secondaryAction.variant || 'secondary'}\n        />\n      ) : null}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionButton\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionButtonProps extends Action {}\n\nconst DocumentActionButton = (action: DocumentActionButtonProps) => {\n  const [dialogId, setDialogId] = React.useState<string | null>(null);\n  const { toggleNotification } = useNotification();\n\n  const handleClick = (action: Action) => async (e: React.MouseEvent) => {\n    const { onClick = () => false, dialog, id } = action;\n\n    const muteDialog = await onClick(e);\n\n    if (dialog && !muteDialog) {\n      switch (dialog.type) {\n        case 'notification':\n          toggleNotification({\n            title: dialog.title,\n            message: dialog.content,\n            type: dialog.status,\n            timeout: dialog.timeout,\n            onClose: dialog.onClose,\n          });\n          break;\n        case 'dialog':\n        case 'modal':\n          e.preventDefault();\n          setDialogId(id);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setDialogId(null);\n  };\n\n  return (\n    <>\n      <Button\n        flex=\"auto\"\n        startIcon={action.icon}\n        disabled={action.disabled}\n        onClick={handleClick(action)}\n        justifyContent=\"center\"\n        variant={action.variant || 'default'}\n        paddingTop=\"7px\"\n        paddingBottom=\"7px\"\n        loading={action.loading}\n      >\n        {action.label}\n      </Button>\n      {action.dialog?.type === 'dialog' ? (\n        <DocumentActionConfirmDialog\n          {...action.dialog}\n          variant={action.dialog?.variant ?? action.variant}\n          isOpen={dialogId === action.id}\n          onClose={handleClose}\n        />\n      ) : null}\n      {action.dialog?.type === 'modal' ? (\n        <DocumentActionModal\n          {...action.dialog}\n          onModalClose={handleClose}\n          isOpen={dialogId === action.id}\n        />\n      ) : null}\n    </>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionMenu\n * -----------------------------------------------------------------------------------------------*/\ninterface DocumentActionsMenuProps {\n  actions: Action[];\n  children?: React.ReactNode;\n  label?: string;\n  variant?: 'ghost' | 'tertiary';\n}\n\nconst MenuItem = styled(Menu.Item)<{ isVariantDanger?: boolean; isDisabled?: boolean }>`\n  &:hover {\n    background: ${({ theme, isVariantDanger, isDisabled }) =>\n      isVariantDanger && !isDisabled ? theme.colors.danger100 : 'neutral'};\n  }\n`;\n\nconst DocumentActionsMenu = ({\n  actions,\n  children,\n  label,\n  variant = 'tertiary',\n}: DocumentActionsMenuProps) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [dialogId, setDialogId] = React.useState<string | null>(null);\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const isDisabled = actions.every((action) => action.disabled) || actions.length === 0;\n\n  const handleClick = (action: Action) => async (e: React.SyntheticEvent) => {\n    const { onClick = () => false, dialog, id } = action;\n\n    const muteDialog = await onClick(e);\n\n    if (dialog && !muteDialog) {\n      switch (dialog.type) {\n        case 'notification':\n          toggleNotification({\n            title: dialog.title,\n            message: dialog.content,\n            type: dialog.status,\n            timeout: dialog.timeout,\n            onClose: dialog.onClose,\n          });\n          break;\n        case 'dialog':\n        case 'modal':\n          setDialogId(id);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setDialogId(null);\n    setIsOpen(false);\n  };\n\n  return (\n    <Menu.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Menu.Trigger\n        disabled={isDisabled}\n        size=\"S\"\n        endIcon={null}\n        paddingTop=\"4px\"\n        paddingLeft=\"7px\"\n        paddingRight=\"7px\"\n        variant={variant}\n      >\n        <More aria-hidden focusable={false} />\n        <VisuallyHidden tag=\"span\">\n          {label ||\n            formatMessage({\n              id: 'content-manager.containers.edit.panels.default.more-actions',\n              defaultMessage: 'More document actions',\n            })}\n        </VisuallyHidden>\n      </Menu.Trigger>\n      <Menu.Content maxHeight={undefined} popoverPlacement=\"bottom-end\">\n        {actions.map((action) => {\n          return (\n            <MenuItem\n              disabled={action.disabled}\n              /* @ts-expect-error â€“ TODO: this is an error in the DS where it is most likely a synthetic event, not regular. */\n              onSelect={handleClick(action)}\n              display=\"block\"\n              key={action.id}\n              isVariantDanger={action.variant === 'danger'}\n              isDisabled={action.disabled}\n            >\n              <Flex justifyContent=\"space-between\" gap={4}>\n                <Flex\n                  color={!action.disabled ? convertActionVariantToColor(action.variant) : 'inherit'}\n                  gap={2}\n                  tag=\"span\"\n                >\n                  <Flex\n                    tag=\"span\"\n                    color={\n                      !action.disabled ? convertActionVariantToIconColor(action.variant) : 'inherit'\n                    }\n                  >\n                    {action.icon}\n                  </Flex>\n                  {action.label}\n                </Flex>\n              </Flex>\n            </MenuItem>\n          );\n        })}\n        {children}\n      </Menu.Content>\n      {actions.map((action) => {\n        return (\n          <React.Fragment key={action.id}>\n            {action.dialog?.type === 'dialog' ? (\n              <DocumentActionConfirmDialog\n                {...action.dialog}\n                variant={action.variant}\n                isOpen={dialogId === action.id}\n                onClose={handleClose}\n              />\n            ) : null}\n            {action.dialog?.type === 'modal' ? (\n              <DocumentActionModal\n                {...action.dialog}\n                onModalClose={handleClose}\n                isOpen={dialogId === action.id}\n              />\n            ) : null}\n          </React.Fragment>\n        );\n      })}\n    </Menu.Root>\n  );\n};\n\nconst convertActionVariantToColor = (\n  variant: DocumentActionDescription['variant'] = 'secondary'\n): keyof DefaultTheme['colors'] | undefined => {\n  switch (variant) {\n    case 'danger':\n      return 'danger600';\n    case 'secondary':\n      return undefined;\n    case 'success':\n      return 'success600';\n    default:\n      return 'primary600';\n  }\n};\n\nconst convertActionVariantToIconColor = (\n  variant: DocumentActionDescription['variant'] = 'secondary'\n): keyof DefaultTheme['colors'] | undefined => {\n  switch (variant) {\n    case 'danger':\n      return 'danger600';\n    case 'secondary':\n      return 'neutral500';\n    case 'success':\n      return 'success600';\n    default:\n      return 'primary600';\n  }\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionConfirmDialog\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionConfirmDialogProps extends DialogOptions, Pick<Action, 'variant'> {\n  onClose: () => void;\n  isOpen: Dialog.Props['open'];\n  loading?: ButtonProps['loading'];\n}\n\nconst DocumentActionConfirmDialog = ({\n  onClose,\n  onCancel,\n  onConfirm,\n  title,\n  content,\n  isOpen,\n  variant = 'secondary',\n  loading,\n}: DocumentActionConfirmDialogProps) => {\n  const { formatMessage } = useIntl();\n\n  const handleClose = async () => {\n    if (onCancel) {\n      await onCancel();\n    }\n\n    onClose();\n  };\n\n  const handleConfirm = async () => {\n    if (onConfirm) {\n      await onConfirm();\n    }\n\n    onClose();\n  };\n\n  return (\n    <Dialog.Root open={isOpen} onOpenChange={handleClose}>\n      <Dialog.Content>\n        <Dialog.Header>{title}</Dialog.Header>\n        <Dialog.Body>{content}</Dialog.Body>\n        <Dialog.Footer>\n          <Dialog.Cancel>\n            <Button variant=\"tertiary\" fullWidth>\n              {formatMessage({\n                id: 'app.components.Button.cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n          </Dialog.Cancel>\n          <Button onClick={handleConfirm} variant={variant} fullWidth loading={loading}>\n            {formatMessage({\n              id: 'app.components.Button.confirm',\n              defaultMessage: 'Confirm',\n            })}\n          </Button>\n        </Dialog.Footer>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionModal\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DocumentActionModalProps extends ModalOptions {\n  onModalClose: () => void;\n  isOpen?: boolean;\n}\n\nconst DocumentActionModal = ({\n  isOpen,\n  title,\n  onClose,\n  footer: Footer,\n  content: Content,\n  onModalClose,\n}: DocumentActionModalProps) => {\n  const handleClose = () => {\n    if (onClose) {\n      onClose();\n    }\n\n    onModalClose();\n  };\n\n  return (\n    <Modal.Root open={isOpen} onOpenChange={handleClose}>\n      <Modal.Content>\n        <Modal.Header>\n          <Modal.Title>{title}</Modal.Title>\n        </Modal.Header>\n        {typeof Content === 'function' ? (\n          <Content onClose={handleClose} />\n        ) : (\n          <Modal.Body>{Content}</Modal.Body>\n        )}\n        {typeof Footer === 'function' ? <Footer onClose={handleClose} /> : Footer}\n      </Modal.Content>\n    </Modal.Root>\n  );\n};\n\nconst transformData = (data: Record<string, any>): any => {\n  if (Array.isArray(data)) {\n    return data.map(transformData);\n  }\n\n  if (typeof data === 'object' && data !== null) {\n    if ('apiData' in data) {\n      return data.apiData;\n    }\n\n    return mapValues(transformData)(data);\n  }\n\n  return data;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DocumentActionComponents\n * -----------------------------------------------------------------------------------------------*/\n\nconst PublishAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  meta,\n  document,\n  onPreview,\n  fromPreview = false,\n  fromRelationModal = false,\n}) => {\n  const schema = useDocumentContext('PublishAction', (state) => state.document.schema);\n  const navigate = useNavigate();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatValidationErrors: formatValidationErrors } = useAPIErrorHandler();\n  const isListView = useMatch(LIST_PATH) !== null;\n  const isCloning = useMatch(CLONE_PATH) !== null;\n  const { id } = useParams();\n  const { formatMessage } = useIntl();\n  const canPublish = useDocumentRBAC('PublishAction', ({ canPublish }) => canPublish);\n  const { publish, isLoading } = useDocumentActions(fromPreview, fromRelationModal);\n  const [\n    countDraftRelations,\n    { isLoading: isLoadingDraftRelations, isError: isErrorDraftRelations },\n  ] = useGetDraftRelationCountQuery();\n  const [localCountOfDraftRelations, setLocalCountOfDraftRelations] = React.useState(0);\n  const [serverCountOfDraftRelations, setServerCountOfDraftRelations] = React.useState(0);\n\n  const [{ query, rawQuery }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const modified = useForm('PublishAction', ({ modified }) => modified);\n  const setSubmitting = useForm('PublishAction', ({ setSubmitting }) => setSubmitting);\n  const isSubmitting = useForm('PublishAction', ({ isSubmitting }) => isSubmitting);\n  const validate = useForm('PublishAction', (state) => state.validate);\n  const setErrors = useForm('PublishAction', (state) => state.setErrors);\n  const formValues = useForm('PublishAction', ({ values }) => values);\n\n  const rootDocumentMeta = useDocumentContext('PublishAction', (state) => state.rootDocumentMeta);\n  const currentDocumentMeta = useDocumentContext('PublishAction', (state) => state.meta);\n\n  React.useEffect(() => {\n    if (isErrorDraftRelations) {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage({\n          id: getTranslation('error.records.fetch-draft-relatons'),\n          defaultMessage: 'An error occurred while fetching draft relations on this document.',\n        }),\n      });\n    }\n  }, [isErrorDraftRelations, toggleNotification, formatMessage]);\n\n  React.useEffect(() => {\n    const localDraftRelations = new Set();\n\n    /**\n     * Extracts draft relations from the provided data object.\n     * It checks for a connect array of relations.\n     * If a relation has a status of 'draft', its id is added to the localDraftRelations set.\n     */\n    const extractDraftRelations = (data: Omit<RelationsFormValue, 'disconnect'>) => {\n      const relations = data.connect || [];\n      relations.forEach((relation) => {\n        if (relation.status === 'draft') {\n          localDraftRelations.add(relation.id);\n        }\n      });\n    };\n\n    /**\n     * Recursively traverses the provided data object to extract draft relations from arrays within 'connect' keys.\n     * If the data is an object, it looks for 'connect' keys to pass their array values to extractDraftRelations.\n     * It recursively calls itself for any non-null objects it contains.\n     */\n    const traverseAndExtract = (data: { [field: string]: any }) => {\n      Object.entries(data).forEach(([key, value]) => {\n        if (key === 'connect' && Array.isArray(value)) {\n          extractDraftRelations({ connect: value });\n        } else if (typeof value === 'object' && value !== null) {\n          traverseAndExtract(value);\n        }\n      });\n    };\n\n    if (!documentId || modified) {\n      traverseAndExtract(formValues);\n      setLocalCountOfDraftRelations(localDraftRelations.size);\n    }\n  }, [documentId, modified, formValues, setLocalCountOfDraftRelations]);\n\n  React.useEffect(() => {\n    if (!document || !document.documentId || isListView) {\n      return;\n    }\n\n    const fetchDraftRelationsCount = async () => {\n      const { data, error } = await countDraftRelations({\n        collectionType,\n        model,\n        documentId,\n        params,\n      });\n\n      if (error) {\n        throw error;\n      }\n\n      if (data) {\n        setServerCountOfDraftRelations(data.data);\n      }\n    };\n\n    fetchDraftRelationsCount();\n  }, [isListView, document, documentId, countDraftRelations, collectionType, model, params]);\n\n  const isDocumentPublished =\n    (document?.[PUBLISHED_AT_ATTRIBUTE_NAME] ||\n      meta?.availableStatus.some((doc) => doc[PUBLISHED_AT_ATTRIBUTE_NAME] !== null)) &&\n    document?.status !== 'modified';\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  const performPublish = async () => {\n    setSubmitting(true);\n\n    try {\n      const { errors } = await validate(true, {\n        status: 'published',\n      });\n\n      if (errors) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: 'content-manager.validation.error',\n            defaultMessage:\n              'There are validation errors in your document. Please fix them before saving.',\n          }),\n        });\n\n        return;\n      }\n\n      const isPublishingRelation = rootDocumentMeta.documentId !== currentDocumentMeta.documentId;\n      const res = await publish(\n        {\n          collectionType,\n          model,\n          documentId,\n          params: isPublishingRelation ? currentDocumentMeta.params : params,\n        },\n        transformData(formValues)\n      );\n\n      if ('data' in res && collectionType !== SINGLE_TYPES) {\n        /**\n         * TODO: refactor the router so we can just do `../${res.data.documentId}` instead of this.\n         */\n        if (id === 'create') {\n          navigate({\n            pathname: `../${collectionType}/${model}/${res.data.documentId}`,\n            search: rawQuery,\n          });\n        }\n      } else if (\n        'error' in res &&\n        isBaseQueryError(res.error) &&\n        res.error.name === 'ValidationError'\n      ) {\n        setErrors(formatValidationErrors(res.error));\n      }\n    } finally {\n      setSubmitting(false);\n\n      if (onPreview) {\n        onPreview();\n      }\n    }\n  };\n\n  const totalDraftRelations = localCountOfDraftRelations + serverCountOfDraftRelations;\n  // TODO skipping this for now as there is a bug with the draft relation count that will be worked on separately\n  // see RFC \"Count draft relations\" in Notion\n  const enableDraftRelationsCount = false;\n  const hasDraftRelations = enableDraftRelationsCount && totalDraftRelations > 0;\n\n  return {\n    loading: isLoading,\n    position: ['panel', 'preview', 'relation-modal'],\n    /**\n     * Disabled when:\n     *  - currently if you're cloning a document we don't support publish & clone at the same time.\n     *  - the form is submitting\n     *  - the active tab is the published tab\n     *  - the document is already published & not modified\n     *  - the document is being created & not modified\n     *  - the user doesn't have the permission to publish\n     */\n    disabled:\n      isCloning ||\n      isSubmitting ||\n      isLoadingDraftRelations ||\n      activeTab === 'published' ||\n      (!modified && isDocumentPublished) ||\n      (!modified && !document?.documentId) ||\n      !canPublish,\n    label: formatMessage({\n      id: 'app.utils.publish',\n      defaultMessage: 'Publish',\n    }),\n    onClick: async () => {\n      if (hasDraftRelations) {\n        // In this case we need to show the user a confirmation dialog.\n        // Return from the onClick and let the dialog handle the process.\n        return;\n      }\n\n      await performPublish();\n    },\n    dialog: hasDraftRelations\n      ? {\n          type: 'dialog',\n          variant: 'danger',\n          footer: null,\n          title: formatMessage({\n            id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.title`),\n            defaultMessage: 'Confirmation',\n          }),\n          content: formatMessage(\n            {\n              id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.message`),\n              defaultMessage:\n                'This entry is related to {count, plural, one {# draft entry} other {# draft entries}}. Publishing it could leave broken links in your app.',\n            },\n            {\n              count: totalDraftRelations,\n            }\n          ),\n          onConfirm: async () => {\n            await performPublish();\n          },\n        }\n      : undefined,\n  };\n};\n\nPublishAction.type = 'publish';\nPublishAction.position = ['panel', 'preview', 'relation-modal'];\n\nconst UpdateAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  onPreview,\n  fromPreview = false,\n  fromRelationModal = false,\n}) => {\n  const navigate = useNavigate();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatValidationErrors: formatValidationErrors } = useAPIErrorHandler();\n  const cloneMatch = useMatch(CLONE_PATH);\n  const isCloning = cloneMatch !== null;\n  const { formatMessage } = useIntl();\n  const { create, update, clone, isLoading } = useDocumentActions(fromPreview, fromRelationModal);\n  const [{ query, rawQuery }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const isSubmitting = useForm('UpdateAction', ({ isSubmitting }) => isSubmitting);\n  const modified = useForm('UpdateAction', ({ modified }) => modified);\n  const setSubmitting = useForm('UpdateAction', ({ setSubmitting }) => setSubmitting);\n  const document = useForm('UpdateAction', ({ values }) => values);\n  const validate = useForm('UpdateAction', (state) => state.validate);\n  const setErrors = useForm('UpdateAction', (state) => state.setErrors);\n  const resetForm = useForm('PublishAction', ({ resetForm }) => resetForm);\n\n  const rootDocumentMeta = useDocumentContext('UpdateAction', (state) => state.rootDocumentMeta);\n  const currentDocumentMeta = useDocumentContext('UpdateAction', (state) => state.meta);\n\n  const handleUpdate = React.useCallback(async () => {\n    setSubmitting(true);\n\n    try {\n      if (!modified) {\n        return;\n      }\n\n      const { errors } = await validate(true, {\n        status: 'draft',\n      });\n\n      if (errors) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: 'content-manager.validation.error',\n            defaultMessage:\n              'There are validation errors in your document. Please fix them before saving.',\n          }),\n        });\n\n        return;\n      }\n\n      if (isCloning) {\n        const res = await clone(\n          {\n            model,\n            documentId: cloneMatch.params.origin!,\n            params,\n          },\n          transformData(document)\n        );\n\n        if ('data' in res) {\n          navigate(\n            {\n              pathname: `../${res.data.documentId}`,\n              search: rawQuery,\n            },\n            { relative: 'path' }\n          );\n        } else if (\n          'error' in res &&\n          isBaseQueryError(res.error) &&\n          res.error.name === 'ValidationError'\n        ) {\n          setErrors(formatValidationErrors(res.error));\n        }\n      } else if (documentId || collectionType === SINGLE_TYPES) {\n        const isEditingRelation = rootDocumentMeta.documentId !== currentDocumentMeta.documentId;\n\n        const res = await update(\n          {\n            collectionType,\n            model,\n            documentId,\n            params: isEditingRelation ? currentDocumentMeta.params : params,\n          },\n          transformData(document)\n        );\n\n        if ('error' in res && isBaseQueryError(res.error) && res.error.name === 'ValidationError') {\n          setErrors(formatValidationErrors(res.error));\n        } else {\n          resetForm();\n        }\n      } else {\n        const res = await create(\n          {\n            model,\n            params,\n          },\n          transformData(document)\n        );\n\n        if ('data' in res && collectionType !== SINGLE_TYPES) {\n          navigate(\n            {\n              pathname: `../${res.data.documentId}`,\n              search: rawQuery,\n            },\n            { replace: true, relative: 'path' }\n          );\n        } else if (\n          'error' in res &&\n          isBaseQueryError(res.error) &&\n          res.error.name === 'ValidationError'\n        ) {\n          setErrors(formatValidationErrors(res.error));\n        }\n      }\n    } finally {\n      setSubmitting(false);\n      if (onPreview) {\n        onPreview();\n      }\n    }\n  }, [\n    clone,\n    cloneMatch?.params.origin,\n    collectionType,\n    create,\n    currentDocumentMeta.documentId,\n    currentDocumentMeta.params,\n    document,\n    documentId,\n    formatMessage,\n    formatValidationErrors,\n    isCloning,\n    model,\n    modified,\n    navigate,\n    onPreview,\n    params,\n    rawQuery,\n    resetForm,\n    rootDocumentMeta.documentId,\n    setErrors,\n    setSubmitting,\n    toggleNotification,\n    update,\n    validate,\n  ]);\n\n  // Auto-save on CMD+S or CMD+Enter on macOS, and CTRL+S or CTRL+Enter on Windows/Linux\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUpdate();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleUpdate]);\n\n  return {\n    loading: isLoading,\n    /**\n     * Disabled when:\n     * - the form is submitting\n     * - the document is not modified & we're not cloning (you can save a clone entity straight away)\n     * - the active tab is the published tab\n     */\n    disabled: isSubmitting || (!modified && !isCloning) || activeTab === 'published',\n    label: formatMessage({\n      id: 'global.save',\n      defaultMessage: 'Save',\n    }),\n    onClick: handleUpdate,\n    position: ['panel', 'preview', 'relation-modal'],\n  };\n};\n\nUpdateAction.type = 'update';\nUpdateAction.position = ['panel', 'preview', 'relation-modal'];\n\nconst UNPUBLISH_DRAFT_OPTIONS = {\n  KEEP: 'keep',\n  DISCARD: 'discard',\n};\n\nconst UnpublishAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  document,\n}) => {\n  const { formatMessage } = useIntl();\n  const { schema } = useDoc();\n  const canPublish = useDocumentRBAC('UnpublishAction', ({ canPublish }) => canPublish);\n  const { unpublish } = useDocumentActions();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const { toggleNotification } = useNotification();\n  const [shouldKeepDraft, setShouldKeepDraft] = React.useState(true);\n\n  const isDocumentModified = document?.status === 'modified';\n\n  const handleChange = (value: string) => {\n    setShouldKeepDraft(value === UNPUBLISH_DRAFT_OPTIONS.KEEP);\n  };\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  return {\n    disabled:\n      !canPublish ||\n      activeTab === 'published' ||\n      (document?.status !== 'published' && document?.status !== 'modified'),\n    label: formatMessage({\n      id: 'app.utils.unpublish',\n      defaultMessage: 'Unpublish',\n    }),\n    icon: <Cross />,\n    onClick: async () => {\n      /**\n       * return if there's no id & we're in a collection type, or the status modified\n       * for either collection type because we use a dialog to handle the process in\n       * the latter case.\n       */\n      if ((!documentId && collectionType !== SINGLE_TYPES) || isDocumentModified) {\n        if (!documentId) {\n          // This should never, ever, happen.\n          console.error(\n            \"You're trying to unpublish a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n          );\n\n          toggleNotification({\n            message: formatMessage({\n              id: 'content-manager.actions.unpublish.error',\n              defaultMessage: 'An error occurred while trying to unpublish the document.',\n            }),\n            type: 'danger',\n          });\n        }\n\n        return;\n      }\n\n      await unpublish({\n        collectionType,\n        model,\n        documentId,\n        params,\n      });\n    },\n    dialog: isDocumentModified\n      ? {\n          type: 'dialog',\n          title: formatMessage({\n            id: 'app.components.ConfirmDialog.title',\n            defaultMessage: 'Confirmation',\n          }),\n          content: (\n            <Flex alignItems=\"flex-start\" direction=\"column\" gap={6}>\n              <Flex width=\"100%\" direction=\"column\" gap={2}>\n                <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n                <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.body',\n                    defaultMessage: 'Are you sure?',\n                  })}\n                </Typography>\n              </Flex>\n              <Radio.Group\n                defaultValue={UNPUBLISH_DRAFT_OPTIONS.KEEP}\n                name=\"discard-options\"\n                aria-label={formatMessage({\n                  id: 'content-manager.actions.unpublish.dialog.radio-label',\n                  defaultMessage: 'Choose an option to unpublish the document.',\n                })}\n                onValueChange={handleChange}\n              >\n                <Radio.Item checked={shouldKeepDraft} value={UNPUBLISH_DRAFT_OPTIONS.KEEP}>\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.option.keep-draft',\n                    defaultMessage: 'Keep draft',\n                  })}\n                </Radio.Item>\n                <Radio.Item checked={!shouldKeepDraft} value={UNPUBLISH_DRAFT_OPTIONS.DISCARD}>\n                  {formatMessage({\n                    id: 'content-manager.actions.unpublish.dialog.option.replace-draft',\n                    defaultMessage: 'Replace draft',\n                  })}\n                </Radio.Item>\n              </Radio.Group>\n            </Flex>\n          ),\n          onConfirm: async () => {\n            if (!documentId && collectionType !== SINGLE_TYPES) {\n              // This should never, ever, happen.\n              console.error(\n                \"You're trying to unpublish a document without an id, this is likely a bug with Strapi. Please open an issue.\"\n              );\n\n              toggleNotification({\n                message: formatMessage({\n                  id: 'content-manager.actions.unpublish.error',\n                  defaultMessage: 'An error occurred while trying to unpublish the document.',\n                }),\n                type: 'danger',\n              });\n            }\n\n            await unpublish(\n              {\n                collectionType,\n                model,\n                documentId,\n                params,\n              },\n              !shouldKeepDraft\n            );\n          },\n        }\n      : undefined,\n    variant: 'danger',\n    position: ['panel', 'table-row'],\n  };\n};\n\nUnpublishAction.type = 'unpublish';\nUnpublishAction.position = 'panel';\n\nconst DiscardAction: DocumentActionComponent = ({\n  activeTab,\n  documentId,\n  model,\n  collectionType,\n  document,\n}) => {\n  const { formatMessage } = useIntl();\n  const { schema } = useDoc();\n  const canUpdate = useDocumentRBAC('DiscardAction', ({ canUpdate }) => canUpdate);\n  const { discard, isLoading } = useDocumentActions();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  return {\n    disabled: !canUpdate || activeTab === 'published' || document?.status !== 'modified',\n    label: formatMessage({\n      id: 'content-manager.actions.discard.label',\n      defaultMessage: 'Discard changes',\n    }),\n    icon: <Cross />,\n    position: ['panel', 'table-row'],\n    variant: 'danger',\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      content: (\n        <Flex direction=\"column\" gap={2}>\n          <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n            {formatMessage({\n              id: 'content-manager.actions.discard.dialog.body',\n              defaultMessage: 'Are you sure?',\n            })}\n          </Typography>\n        </Flex>\n      ),\n      loading: isLoading,\n      onConfirm: async () => {\n        await discard({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n      },\n    },\n  };\n};\n\nDiscardAction.type = 'discard';\nDiscardAction.position = 'panel';\n\nconst DEFAULT_ACTIONS = [PublishAction, UpdateAction, UnpublishAction, DiscardAction];\n\nexport { DocumentActions, DocumentActionsMenu, DocumentActionButton, DEFAULT_ACTIONS };\nexport type {\n  DocumentActionDescription,\n  DocumentActionPosition,\n  DialogOptions,\n  NotificationOptions,\n  ModalOptions,\n};\n"],"names":["DocumentActions","actions","formatMessage","useIntl","primaryAction","secondaryAction","restActions","filter","action","position","undefined","positions","Array","isArray","includes","_jsxs","Flex","direction","gap","alignItems","width","_jsx","DocumentActionButton","variant","length","DocumentActionsMenu","label","id","defaultMessage","dialogId","setDialogId","React","useState","toggleNotification","useNotification","handleClick","e","onClick","dialog","muteDialog","type","title","message","content","status","timeout","onClose","preventDefault","handleClose","_Fragment","Button","flex","startIcon","icon","disabled","justifyContent","paddingTop","paddingBottom","loading","DocumentActionConfirmDialog","isOpen","DocumentActionModal","onModalClose","MenuItem","styled","Menu","Item","theme","isVariantDanger","isDisabled","colors","danger100","children","setIsOpen","every","Root","open","onOpenChange","Trigger","size","endIcon","paddingLeft","paddingRight","More","aria-hidden","focusable","VisuallyHidden","tag","Content","maxHeight","popoverPlacement","map","onSelect","display","color","convertActionVariantToColor","convertActionVariantToIconColor","Fragment","onCancel","onConfirm","handleConfirm","Dialog","Header","Body","Footer","Cancel","fullWidth","footer","Modal","Title","transformData","data","apiData","mapValues","PublishAction","activeTab","documentId","model","collectionType","meta","document","onPreview","fromPreview","fromRelationModal","schema","useDocumentContext","state","navigate","useNavigate","_unstableFormatValidationErrors","formatValidationErrors","useAPIErrorHandler","isListView","useMatch","LIST_PATH","isCloning","CLONE_PATH","useParams","canPublish","useDocumentRBAC","publish","isLoading","useDocumentActions","countDraftRelations","isLoadingDraftRelations","isError","isErrorDraftRelations","useGetDraftRelationCountQuery","localCountOfDraftRelations","setLocalCountOfDraftRelations","serverCountOfDraftRelations","setServerCountOfDraftRelations","query","rawQuery","useQueryParams","params","useMemo","buildValidParams","modified","useForm","setSubmitting","isSubmitting","validate","setErrors","formValues","values","rootDocumentMeta","currentDocumentMeta","useEffect","getTranslation","localDraftRelations","Set","extractDraftRelations","relations","connect","forEach","relation","add","traverseAndExtract","Object","entries","key","value","fetchDraftRelationsCount","error","isDocumentPublished","PUBLISHED_AT_ATTRIBUTE_NAME","availableStatus","some","doc","options","draftAndPublish","performPublish","errors","isPublishingRelation","res","SINGLE_TYPES","pathname","search","isBaseQueryError","name","totalDraftRelations","enableDraftRelationsCount","hasDraftRelations","count","UpdateAction","cloneMatch","create","update","clone","resetForm","handleUpdate","useCallback","origin","relative","isEditingRelation","replace","handleKeyDown","metaKey","ctrlKey","window","addEventListener","removeEventListener","UNPUBLISH_DRAFT_OPTIONS","KEEP","DISCARD","UnpublishAction","useDoc","unpublish","shouldKeepDraft","setShouldKeepDraft","isDocumentModified","handleChange","Cross","console","WarningCircle","height","fill","Typography","textAlign","Radio","Group","defaultValue","aria-label","onValueChange","checked","DiscardAction","canUpdate","discard","DEFAULT_ACTIONS"],"mappings":"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"}